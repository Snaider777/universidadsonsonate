"use client";
import { useEffect, useState } from 'react';
import { motion, scroll } from 'framer-motion';
import { useInView } from 'react-intersection-observer';
const TourUSO = () => {
    const [scrollDirection, setScrollDirection] = useState(null);
    const { ref, inView } = useInView();
    useEffect(() => {
      let scrollUlti = window.scrollY;
      const leerScrollDire = () =>{
        let scrollActu = window.scrollY;
        if(scrollActu > scrollUlti){
          setScrollDirection('down');
        }else{
          setScrollDirection('up');
        }
        scrollUlti = scrollActu > 0 ? scrollActu : 0;
      };
      window.addEventListener('scroll', leerScrollDire);
      return () => {
        window.removeEventListener('scroll', leerScrollDire);
      };
    }, []);
    // Animaciones
    const textAnimation = {
      hidden: { opacity: 0, x: -50 },
      visible: { opacity: 1, x: 0 },
    };
    const imgAnimation = {
      hidden: { opacity: 0, y: -90 },
      visible: { opacity: 1, y: 0 },
      up: {opacity: 1, y: 20},
      down: {opacity: 1, y: -0}
    };
    const divAnimation = {
      hidden: { opacity: 0, x: 90 },
      visible: { opacity: 1, x: 0 },
      up: {opacity: 1, y: 20},
      down: {opacity: 1, y: -0}
    };
    const figuraAnition={
      hidden: {opacity: 0, y: -50},
      visible: {opacity: 1, x: 10},
      up: {opacity: 1, y: 0},
      down: {opacity: 1, y: 0}
    };
    return (
      <div ref={ref} className=" overflow-hidden bg-[#1f3d7a] py-6">
        <div className="grid grid-cols-1 md:grid-cols-1 lg:grid-cols-2">
        <motion.div
          className="relative flex flex-col md:flex-col lg:flex-row lg:w-screen justify-center items-center h-auto w-full p-4 bg-[#1f3d7a]"
        >
          {/* Contenido de texto */}
            <motion.div
            className="relative flex flex-col justify-center items-start p-4 md:p-8 w-full md:w-full lg:w-1/2 text-white"
            initial={{ opacity: 0, scale: 1 }}
            animate={inView ? (scrollDirection === 'down' ? divAnimation.down : divAnimation.up) : divAnimation.hidden}
            variants={textAnimation}
            transition={{ duration: 1 }}
          >
            <h2 className="text-2xl md:text-3xl lg:text-4xl font-bold mb-4">
              ¡BIENVENIDO AL TOUR USO!
            </h2>
            <p className="text-base md:text-lg lg:text-xl mb-4">
            Prepárate para una experiencia inolvidable mientras exploramos juntos cada rincón de nuestra querida Universidad de Sonsonate.
            </p>
            <p className="text-base md:text-lg lg:text-xl mb-4">
            ¡Adéntrate en esta aventura y descubre todo lo que la Universidad de Sonsonate tiene preparado para ti! Nuestro compromiso es brindarte no solo una educación de calidad, sino también una experiencia enriquecedora que marcará la diferencia en tu vida. Tu camino al éxito comienza aquí, y estamos emocionados de ser parte de él.
            </p>
          </motion.div>
          <div className="w-3/5 pl-12 lg:w-1/2 flex mt-8 lg:pt-11 lg:pl-48 lg:mb-0 lg:mr-0 lg:pr-32 md:w-1/2">
          <div className="relative">
            {/* Círculo de Fondo */}
            <div className="absolute -left-6 -top-6 w-3/5 h-72 bg-green-600 rounded-3xl opacity-30"></div>
            {/* Imagen */}
            <motion.div
              initial={{opacity: 0, y: 20}}
              animate={inView ? (scrollDirection === 'down' ? figuraAnition.down : figuraAnition.up) : figuraAnition.hidden}
              transition={{ duration: 1, delay: 0.5 }}
              variants={imgAnimation}
              className="relative z-10 pb-16 md:h-3/5"
            >
              <motion.img
                src="/images/img-inicio-1.webp"
                alt="Estudiante feliz"
                className="w-full h-auto object-cover rounded-2xl"
                animate={inView ? (scrollDirection === 'down' ? figuraAnition.down : figuraAnition.up) : figuraAnition.hidden}
              />
            </motion.div>
          </div>
        </div>

        </motion.div>
        </div>
        <motion.div
            initial={{opacity: 0, y: 20}}
            animate={inView ? (scrollDirection === 'down' ? divAnimation.down : divAnimation.up) : divAnimation.hidden}
            transition={{duration: 0.9}}
            variants={figuraAnition}
        >
          <div className="relative w-full h-16">
                <div className="absolute top-0 left-0 w-full h-20 bg-[#05ce0e] transform -skew-y-3 origin-top-left"
                ></div>
          </div>
        </motion.div>
      </div>
    );
  };
  
  export default TourUSO;
  